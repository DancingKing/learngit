$(function(){var len=$("#ban-ul li").length;var oUl=$("#ban-ul");var circleUl=$("#circle-ul");var wid=$("#ban-ul li").width();lunBo(oUl,circleUl);function lunBo(oUl,circleUl){var index=1;var timer=null;autoPlay();circleUl.find("li").click(function(){index=$(this).index()+1;play()});$(".btn-left").click(function(){index--;play()});$(".btn-right").click(function(){index++;play()});$(".banner-out").hover(function(){clearInterval(timer)},function(){autoPlay()});function autoPlay(){timer=setInterval(function(){index++;play()},2000)}function play(){if(index>len-1){index=2;oUl.css({"left":-wid})}if(index<0){index=len-3;oUl.css({"left":-(len-2)*wid})}oUl.stop().animate({"left":-(index)*wid},1000,function(){});circleUl.find("li").eq((index-1)%3).addClass("active").siblings().removeClass("active")}}var changeIndex=0;$(".change").click(function(){changeIndex++;if(changeIndex>2){changeIndex=0;$(".tj-change").css("left",0)}$(".tj-change").animate({"left":-changeIndex*850+"px"},500)});getData($("#newClass"),$(".new-Class"),"new");getData($("#primaryClass"),$(".primary-Class"),"primary");getData($("#middleClass"),$(".middle-Class"),"middle");getData($("#seniorClass"),$(".senior-Class"),"senior");function getData(obj,objClass,type){$.get("allClass.json",function(data){var dataList=data[type];for(var i=0;i<objClass.length;i++){objClass.eq(i).attr("classId",dataList[i].id);objClass.eq(i).attr("classType",dataList[i].type);obj.find(".icon").eq(i).prop("src","../img3/"+dataList[i].id+".jpg");obj.find(".class-title").eq(i).html(dataList[i].title.split("-")[1]);obj.find(".describe p").eq(i).html(dataList[i].desc)}})}$(".class-content>li").click(function(){cookie.set("sendId",$(this).find("dt").attr("classId"),1);cookie.set("sendType",$(this).find("dt").attr("classType"),1);cookie.set("classListIndex",1,1);window.open("../html/play.html")});$("#ban-ul li").click(function(){cookie.set("sendId",$(this).attr("classId"),1);cookie.set("sendType",$(this).attr("classType"),1);cookie.set("classListIndex",1,1);window.open("../html/play.html")});$(".wait").click(function(){alert("敬请期待！")})});