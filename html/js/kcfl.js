$(function(){var listLen=0;var len=$(".class-list li").length;$(".fl-tit").click(function(){$(this).addClass("active").siblings(".fl-tit").removeClass("active");getData($(this).prop("id"))});$(".all").click(function(){$(".fl-tit").removeClass("active");getData("allClass")});getData("allClass");function getData(type){$.get("allClass.json",function(data){console.log(data);console.log(data.allClass[0].id);var dataList=data[type];var str="";var len=12<dataList.length?12:dataList.length;listLen=Math.round(dataList.length/12);var classList=$(".class-list");var imgSrc="";for(var i=0;i<len;i++){console.log(dataList[i].desc);imgSrc="../img3/"+dataList[i].id+".jpg";str+='<li ><dl class="class-con-dl"><dt classId="'+dataList[i].id+'" classType="'+dataList[i].type+'" class="tj-class"><img class="icon" src="'+imgSrc+'"/>'+'<a class="describe"><p>'+dataList[i].desc+'</p></a></dt><dd><p class="class-title">'+dataList[i].title.split("-")[1]+"</p></dd></dl></li>";classList.html(str)}str="";$(".class-list>li").click(function(){cookie.set("sendId",$(this).find("dt").attr("classId"),1);cookie.set("sendType",$(this).find("dt").attr("classType"),1);cookie.set("classListIndex",1,1);window.open("../html/play.html")});$.jqPaginator("#pageList",{totalPages:listLen,visiblePages:10,currentPage:1,first:'<li class="first"><a href="javascript:void(0);">首页</a></li>',prev:'<li class="prev"><a href="javascript:void(0);">上一页</a></li>',next:'<li class="next"><a href="javascript:void(0);">下一页</a></li>',last:'<li class="last"><a href="javascript:void(0);">尾页</a></li>',page:'<li class="page"><a href="javascript:void(0);">{{page}}</a></li>',onPageChange:function(index,type){var num=(index-1)*12;if(type=="change"&&num<dataList.length){for(var i=num;i<(index*12<dataList.length?index*12:dataList.length);i++){imgSrc="../img3/"+dataList[i].id+".jpg";str+='<li  ><dl class="class-con-dl"><dt classId="'+dataList[i].id+'"classType="'+dataList[i].type+'"  class="tj-class"><img class="icon" src="'+imgSrc+'"/>'+'<a class="describe"><p>'+dataList[i].desc+'</p></a></dt><dd><p class="class-title">'+dataList[i].title.split("-")[1]+"</p></dd></dl></li>";classList.html(str)}str="";$(".class-list>li").click(function(){cookie.set("sendId",$(this).find("dt").attr("classId"),1);cookie.set("sendType",$(this).find("dt").attr("classType"),1);cookie.set("classListIndex",1,1);window.open("../html/play.html")})}}})})}});